{% extends 'base.html' %}

{% block content %}
    
<div class="container mt-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>–°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤</h1>
        <div class="d-flex justify-content-end">
            <a href="{% url 'tests:create_test' %}" class="btn btn-primary ms-5">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</a>    
        </div>
    </div>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>–ö—É—Ä—Å</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã</th>
            <th>–ó–∞–¥–∞–Ω–∏—è</th>
            <th class="text-center" style="width: 100px;">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
            {% for chapter in course.prefetched_chapters %}
                {% with chapter.prefetched_test as test %}
                    {% if test %}
                        <tr>
                            <td>{{ course.title }}</td>
                            <td>{{ chapter.title }}</td>
                            <td>
                                <ul>
                                    {% for task in test.prefetched_tasks %}
                                        <li>{{ task.question }}</li>
                                    {% empty %}
                                        <li class="text-muted">–ù–µ—Ç –∑–∞–¥–∞–Ω–∏–π</li>
                                    {% endfor %}
                                </ul>
                            </td>
                            <td class="text-center">
                                <a href="{% url 'tests:delete_test' test.id %}" class="text-danger">
                                    üóëÔ∏è
                                </a>
                            </td>
                        </tr>
                    {% endif %}
                {% endwith %}
            {% endfor %}
        {% endfor %}
    </tbody>
</table>


</div>     
    
{% endblock %}
